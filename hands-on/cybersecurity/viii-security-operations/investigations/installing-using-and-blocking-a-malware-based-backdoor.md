# Installing, Using, and Blocking a Malware-based Backdoor

## Scenario <a href="#scenario" id="scenario"></a>

In this activity, you will disable Windows Defender, leaving a server vulnerable. You will then simulate the accidental installation of malware and view the changes. You will take on the role of a pen tester or hacker, and determine whether the malware was installed based on open network ports. Next, you'll connect to the infected server, proving you having the ability to exploit it. Finally, in the role of security administrator, you will remove the malware.



### Disable Windows Defender <a href="#disable-windows-defender" id="disable-windows-defender"></a>

In the first part of this activity, you will disable Windows Defender protection, leaving the server vulnerable to malware.

1. &#x20;Select the [MS1](https://labclient.labondemand.com/Instructions/1cc33502-0221-499c-8cec-b1f68f299886?rc=10) VM, select [Ctrl+Alt+Delete](https://labclient.labondemand.com/Instructions/1cc33502-0221-499c-8cec-b1f68f299886?rc=10), then at the login screen, in the Password box, type Pa\$$w0rd and press **ENTER**.
2. &#x20;Select **Start**, and right-click **Windows PowerShell** and select **Run as Administrator**.
3. &#x20;When prompted, select **Yes** to confirm the UAC.
4.  &#x20;Type the following command, then press **ENTER**:

    ```
    Set-MpPreference -DisableRealTimeMonitoring $True
    ```

    This PowerShell cmdlet disables Windows Defender online scanning.
5. &#x20;Close the PowerShell window.

### Install program from Odysseus.iso <a href="#install-program-from-odysseusiso" id="install-program-from-odysseusiso"></a>

Pretend that you are installing the program on the Odysseus.iso disc image, thinking that it is a legitimate piece of software. Insert the disc image and use its autoplay settings to start the installation.

1. &#x20;Select [ODYSSEUS](https://labclient.labondemand.com/Instructions/1cc33502-0221-499c-8cec-b1f68f299886?rc=10) to load the ISO image in the current VM.
2.  &#x20;In the [MS1](https://labclient.labondemand.com/Instructions/1cc33502-0221-499c-8cec-b1f68f299886?rc=10) VM window, click the notification and then select **Run setup.exe** (it may take up to one minute for the notification to appear).

    > If you don't see the notification pop-up, right click on Start, Run and type **d:\setup.exe** then Enter.

    A User Account Control (UAC) warning is shown because a setup.exe process is trying to execute. The process' image file is unsigned (the publisher is listed as unknown).
3. &#x20;If necessary, select **Show more details**. Note that the install script is set to run in silent mode.
4. &#x20;You would not normally proceed, but for this activity, select **Yes**.
5. &#x20;The installer runs silently, with no visible window. When installation is complete, you will see two new icons on the desktop. Open either of the **SimpleHash** or **SimpleSalter** shortcuts from the desktop.
6. &#x20;Close the utility window.

